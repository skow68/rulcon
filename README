Exceptions
Zbudowana jest dodatkowa warstwa Exceptions. Są to custom Exceptions. W obiektach i funkcjach używany jest try
i w przypadku błędu uruchamiany jest rise naszego custom Exception.
Obsługa custom Exception jest umiejscowiona tylko w kodzie głównym i tutaj generowane są komunikaty dla użytkownika.
Natomiast logi o błędach generowane są w obiektach i funkcjach.

OPIS OPTYMALIZACJI REGÓŁ
INPUT:
fw-01;bamboo1;172.18.5.8;outside;dst1;192.168.170.71;inside;80
fw-01;bamboo2;172.18.5.9;outside;dst1;192.168.170.71;inside;80
fw-01;bamboo2;172.18.5.9;outside;dst1;192.168.170.71;inside;443
fw-01;bamboo2;172.18.5.10;outside;dst1;192.168.170.71;inside;80
fw-01;bamboo3;172.18.5.10;outside;dst1;192.168.170.71;inside;443
fw-01;bamboo3;172.18.5.10;outside;dst1;192.168.170.71;inside;7000
fw-01;amram1;10.143.135.20;inside;adst1;172.31.1.72;outside;80
fw-01;amram1;10.143.135.20;inside;adst1;172.31.1.73;outside;80
fw-01;amram1;10.143.135.20;inside;adst1;172.31.1.74;outside;80
fw-01;amram1;10.143.135.20;inside;adst1;172.31.1.74;outside;8080

Wiemy, że będą co najmniej 2 reguły, dla trójek:
fw-01;outside;inside oraz fw-01;inside;outside
Na samym początku rozdzielamy dane wejściowe według tego kryterium. W niniejszym przykłądzie mamy dwie takie grupy (set1 i set2)
+--------------------------------+
| ['fw-01', 'outside', 'inside'] |set1
+--------------------------------+
| ['fw-01', 'inside', 'outside'] |set2
+--------------------------------+
###################################################################################
SET 1:

Before OPT:
Te dwie tabele zawierają to samo, ale pierwsza zbudowana jest wg kryterium unikalności dest, a druga gw kryterium unikalności src. Dst jest rozumiany jako dstip:port. Te tabele są danymi wejściowymi dla pierwszej optymalizacji.
+---------------------+---------------------------------------------+
| 192.168.170.71:80   | ['172.18.5.8', '172.18.5.9', '172.18.5.10'] |
+---------------------+---------------------------------------------+
| 192.168.170.71:443  | ['172.18.5.9', '172.18.5.10']               |
+---------------------+---------------------------------------------+
| 192.168.170.71:7000 | ['172.18.5.10']                             |
+---------------------+---------------------------------------------+

+-------------+----------------------------------------------------------------+
| 172.18.5.8  | ['192.168.170.71:80']                                          |
+-------------+----------------------------------------------------------------+
| 172.18.5.9  | ['192.168.170.71:80', '192.168.170.71:443']                    |
+-------------+----------------------------------------------------------------+
| 172.18.5.10 | ['192.168.170.71:80', '192.168.170.71:443',                    |
|             | '192.168.170.71:7000']                                         |
+-------------+----------------------------------------------------------------+

OPT 1:
Opymalizacja bez kompromisowa. Kryterium dla tej optymalizacji jest minimalna liczba reguł. Na tym etapie mamy 3 reguły do wprowadzenia:
+------------------------------+--------------------+
| ['172.18.5.8', '172.18.5.9'] | 192.168.170.71:80  |
+------------------------------+--------------------+
| ['172.18.5.9']               | 192.168.170.71:443 |
+------------------------------+--------------------+

+-------------+----------------------------------------------------------------+
| 172.18.5.10 | ['192.168.170.71:80', '192.168.170.71:443',                    |
|             | '192.168.170.71:7000']                                         |
+-------------+----------------------------------------------------------------+

OPT 2:
Opymalizacja bez kompromisowa. W tym przykładzie zadziała tylko dla pierwszej z powyższych tabel, ale ogólnie dotyczy wszystkich przypadków. Chodzi o scalenie reguł, gdzie src i dst są takie same, a różnią się tylko porty. Na tym etapie mamy 2 reguły do wprowadzenia.
+------------------------------+-----------------------------------------------+
| ['172.18.5.8', '172.18.5.9'] | ['192.168.170.71:80', '192.168.170.71:443']   |
+------------------------------+-----------------------------------------------+
| ['172.18.5.10']              | ['192.168.170.71:80', '192.168.170.71:443',   |
|                              | '192.168.170.71:7000']                        |
+------------------------------+-----------------------------------------------+

OPT 3:
Tutaj mamy już kompromis. Wyłuskanie portów z każdego wiersza i wrzucenie do wspólnego worka. W tym przypadku akurat nie ma kompromisu.
+------------------------------+--------------------+-----------------------+
| ['172.18.5.8', '172.18.5.9'] | ['192.168.170.71'] | ['443', '80']         |
+------------------------------+--------------------+-----------------------+
| ['172.18.5.10']              | ['192.168.170.71'] | ['443', '7000', '80'] |
+------------------------------+--------------------+-----------------------+
#################################################################################

SET 2:

W przypadku interesujący jest tylko OPT 3. Pokazuje kompromis na portach.
OPT 2:
+-------------------+----------------------------------------------------------+
| ['10.143.135.20'] | ['172.31.1.72:80', '172.31.1.73:80', '172.31.1.74:80',   |
|                   | '172.31.1.74:8080']                                      |
+-------------------+----------------------------------------------------------+
OPT 3:
+-------------------+-----------------------------------------+----------------+
| ['10.143.135.20'] | ['172.31.1.73', '172.31.1.72',          | ['8080', '80'] |
|                   | '172.31.1.74']                          |                |
+-------------------+-----------------------------------------+----------------+

